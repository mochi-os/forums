// Mochi Forums app
// Copyright Alistair Cunningham 2025

{
	"version": "1.0",
	"label": "app_name",
	"classes": ["forum"],
	"paths": [
		"forums"
	],
	"services": [
		"forums"
	],
	"architecture": {
		"engine": "starlark",
		"version": 2
	},
	"execute": [
		"forums.star"
	],
	"database": {
		"schema": 3,
		"file": "forums.db",
		"create": {"function": "database_create"},
		"upgrade": {"function": "database_upgrade"}
	},
	"icons": [
		{"action": "", "label": "app_name", "file": "images/icon.svg"}
	],
	"actions": {
		"": {"file": "web/dist/index.html"},
		"assets": {"files": "web/dist/assets"},
		"images": {"files": "web/dist/images"},
		"list": {"function": "action_view"},
		"attachments": {"attachments": true},
		"create": {"function": "action_create"},
		"find": {"function": "action_find"},
		"new": {"function": "action_new"},
		"post/create": {"function": "action_post_create"},
		"post/new": {"function": "action_post_new"},
		"search": {"function": "action_search"},
		":forum": {"file": "web/dist/index.html"},
		":forum/assets": {"files": "web/dist/assets"},
		":forum/images": {"files": "web/dist/images"},
		":forum/-/posts": {"function": "action_view"},
		":forum/-/members": {"function": "action_members_edit"},
		":forum/-/members/save": {"function": "action_members_save"},
		":forum/-/subscribe": {"function": "action_subscribe"},
		":forum/-/unsubscribe": {"function": "action_unsubscribe"},
		":forum/-/:post": {"function": "action_post_view"},
		":forum/-/:post/comment": {"function": "action_comment_new"},
		":forum/-/:post/create": {"function": "action_comment_create"},
		":forum/-/:post/edit": {"function": "action_post_edit"},
		":forum/-/:post/delete": {"function": "action_post_delete"},
		":forum/-/:post/vote/:vote": {"function": "action_post_vote"},
		":forum/-/:post/:comment/edit": {"function": "action_comment_edit"},
		":forum/-/:post/:comment/delete": {"function": "action_comment_delete"},
		":forum/-/:post/:comment/vote/:vote": {"function": "action_comment_vote"},
		":forum/-/attachments/:attachment": {"function": "action_attachment_view", "public": true},
		":forum/-/attachments/:attachment/thumbnail": {"function": "action_attachment_thumbnail", "public": true},
		":forum/-/access": {"function": "action_access"},
		":forum/-/access/set": {"function": "action_access_set"},
		":forum/-/access/revoke": {"function": "action_access_revoke"},
		"-/users/search": {"function": "action_users_search"},
		"-/groups": {"function": "action_groups"}
	},

	"events": {
		"attachment/view": {"function": "event_attachment_view"},
		"comment/create": {"function": "event_comment_create_event"},
		"comment/delete": {"function": "event_comment_delete_event"},
		"comment/edit": {"function": "event_comment_edit_event"},
		"comment/submit": {"function": "event_comment_submit_event"},
		"comment/update": {"function": "event_comment_update_event"},
		"comment/vote": {"function": "event_comment_vote_event"},
		"member/update": {"function": "event_member_update_event"},
		"post/create": {"function": "event_post_create_event"},
		"post/delete": {"function": "event_post_delete_event"},
		"post/edit": {"function": "event_post_edit_event"},
		"post/submit": {"function": "event_post_submit_event"},
		"post/update": {"function": "event_post_update_event"},
		"post/vote": {"function": "event_post_vote_event"},
		"subscribe": {"function": "event_subscribe_event"},
		"unsubscribe": {"function": "event_unsubscribe_event"},
		"update": {"function": "event_update_event"}
	}
}